<!DOCTYPE html>
<html>
<head>
    <title>Mongolian Cyrillic typer</title>
<meta charset="utf-8">

    <script type="text/javascript">

var conversion = {
"`":"=",
"~":"+",
"!":"1",
"@":"2",
"#":"3",
"$":"4",
"%":"5",
"^":"6",
"&":"7",
"*":"8",
"(":"9",
")":"0",
"1":"№",
"2":"-",
"3":'"',
"4":"₮",
"5":":",
"6":".",
"7":"_",
"8":",",
"9":"%",
"0":"?",
"-":"е",
"_":"Е",
"=":"щ",
"+":"Щ",

"q":"ф",
"Q":"Ф",
"w":"ц",
"W":"Ц",
"e":"у",
"E":"У",
"r":"ж",
"R":"Ж",
"t":"э",
"T":"Э",
"y":"н",
"Y":"Н",
"u":"г",
"U":"Г",
"i":"ш",
"I":"Ш",
"o":"ү",
"O":"Ү",
"p":"з",
"P":"З",
"[":"к",
"{":"К",
"]":"ъ",
"}":"Ъ",

"a":"й",
"A":"Й",
"s":"ы",
"S":"Ы",
"d":"б",
"D":"Б",
"f":"ө",
"F":"Ө",
"g":"а",
"G":"А",
"h":"х",
"H":"Х",
"j":"р",
"J":"Р",
"k":"о",
"K":"О",
"l":"л",
"L":"Л",
";":"д",
":":"Д",
"'":"п",
'"':"П",

"z":"я",
"Z":"Я",
"x":"ч",
"X":"Ч",
"c":"ё",
"C":"Ё",
"v":"с",
"V":"С",
"b":"м",
"B":"М",
"n":"и",
"N":"И",
"m":"т",
"M":"Т",
",":"ь",
"<":"Ь",
".":"в",
">":"В",
"\u002f":"ю",
"?":"Ю",
        };

 var maxLength = Object.keys(conversion)
    .reduce((a, b) => a.length > b.length ? a : b) // get the longest word
    .length; // and it's length
  
  function convert (text) {
    var converted = "";
    var cur = 0;
    while (cur < text.length) {
      var testedPhoneme;
      var symbol = undefined;
      for (var length = maxLength; length > 0; length --) {
        testedPhoneme = text.substr(cur, length);
        if (conversion[testedPhoneme]) {
          symbol = conversion[testedPhoneme];
          break; // stop the loop
        }
      }
      if (symbol) {
        converted += symbol;
        cur += testedPhoneme.length;
      }
      else {
        converted += text[cur]
        cur++;
      }
    }
    return converted
  }

  function onInputTextChange(txt) {
    var outputTextareaElem = document.getElementById("output_textarea");
    var div = document.createElement("div");
    var outputHtmlEntities = convert(txt);
    div.innerHTML = outputHtmlEntities;
    outputTextareaElem.value = div.innerText;
  }


        function select() {
          const input = document.getElementById('input_textarea');
          input.focus();
          input.select();
        }   
        function copytext() {
          var copyText = document.getElementById("output_textarea");
          copyText.select();
          copyText.setSelectionRange(0, 99999)
          document.execCommand("copy");
        }

    </script>
    
<style>
html {
  font-family:arial;
}
table {
  border-collapse: collapse;
  width: 90%;
}
td, th {
  border: 1px solid #AAA;
  text-align: center;
  padding: 1px;
}
textarea {
    font-size: 13pt;
    width: 96%;
    font-family: arial;
} 
.note {
  border: 1px solid #DDD;
  width: 10%;
  text-align: left;
  padding-left: 30px;
  padding-right: 30px;
  padding-top: 10px;
  padding-bottom: 10px;
}
</style>


</head>
<body>  

<body>  

<center><h1 class="text-center">Mongolian Cyrillic typer</h1>
</center>
 
<center>
<table>
<thead>
<tr>
<th>	
<button onclick="select('input_textarea')">Select all</button>
<button onclick="document.getElementById('input_textarea').value = ''">Clear</button>
</th>
<th>
<button onclick="copytext()">Copy text</button>
<button onclick="bolor()">Bolor D.</button><br>
<button onclick="searchglosbe()">Glosbe</button>
<button onclick="searchwikt()">Wiktionary</button>
<script>
function bolor() {
  window.open("http://www.bolor-toli.com/dictionary/word?authenticity_token=selected_lang=4-1&search=" + document.getElementById('output_textarea').value, "_blank", "toolbar=yes,scrollbars=yes,resizable=yes,top=0,left=300,width=600,height=600");
}
function searchglosbe() {
  window.open("http://glosbe.com/mn/en/" + document.getElementById('output_textarea').value, "_blank", "toolbar=yes,scrollbars=yes,resizable=yes,top=0,left=300,width=600,height=600");
}
function searchwikt() {
  window.open("https://en.wiktionary.org/wiki/" + document.getElementById('output_textarea').value + "#Mongolian", "_blank", "toolbar=yes,scrollbars=yes,resizable=yes,top=0,left=300,width=600,height=600");
}
</script>
</th>
</thead>
<tbody>
<tr>
<td>
<textarea
id="input_textarea"
autofocus=""
placeholder="input."
rows="11"
oninput="onInputTextChange(this.value)"></textarea>    
</td>
<td>
<textarea rows="11" placeholder="output" id="output_textarea"></textarea>    
</td>
</tr>
</tbody>
</table>
<img src="kbd.png" style="width: 60%">
</center>

</body>
</html>
